---

อย่าทำ "ตัวกลาง" ตอนเริ่มโปรเจค หากยังไม่รู้ว่า…
คุณเคยตั้งคำถามถึงแนวปฏิบัติ (Practice) ตอนเริ่มออกแบบโปรเจกใดโปรเจกหนึ่งบ้างไหมครับ ว่าควรออกแบบอย่างไร?
หนึ่งในนั้นที่มักจะถูกนำมาคิดเสมอๆ เลยคือการกำหนดฟังก์ชั่นการทำงานที่เหมือนกัน จัดกลุ่มอยู่ด้วยกันเป็นตัวกลาง (Reuse) ที่จะนำมาใช้ในหลายๆ ส่วนของซอฟต์แวร์ ซึ่งมันเป็นข้อผิดพลาดที่เรียบง่าย
Reuse เป็นหนึ่งในหลักปฎิบัติในการพัฒนาซอฟต์แวร์ที่ดี ช่วยลดโค้ดซ้ำ การทำงานที่ซ้ำซ้อนลง โค้ดดูดี เอาไปโม๋ได้ ใช่ นี่คือข้อดีของมัน
Reuse มีข้อเสียเช่นกัน หากออกแบบโดยไม่เข้าใจ ทำให้ซอฟต์แวร์ซับซ้อนเกินจำเป็น (Over-engineering) ซึ่งมันจะกำหนดแนวที่จะนำมันไปใช้อีกทอดหนึ่ง จนการทำงานร่วมกับโค้ดส่วนอื่นได้ไม่ยืดหยุ่นจนยากต่อการใช้ในที่สุดหรืออาจถูกเลิกใช้ก็เป็น

---

ทำไมจึงไม่ควร Reuse เป็นแนวปฎิบัติ (Practice) ตอนเริ่มออกแบบโปรเจก ก็เพราะ
ไม่ควรพุ่งไปสร้างส่วน reuse ตั้งแต่แรกสุด เพราะว่า "ยังไม่รู้ว่าจะ reuse จริง ๆ อย่างไร" หรือ "ยังไม่เห็น pattern ซ้ำ" ที่จะเกิดขึ้นเลย
ตามหลัก "rule of three" บอกว่า ถ้าคุณเขียนโค้ดซ้ำกัน ครบ 3 ครั้ง ถึงควร refactor ให้มันเป็นส่วน reuse ได้
การ reuse อาจไม่จำเป็นก็ได้ หากไม่ต้องการ refactoring ให้ทำเมื่อเห็นว่าจำเป็นแล้ว
"Reuse" ต้องมีต้นทุน ต้องการการดูแล(maintainer) มีความขึ้นอยู่ต่อกัน(Dependency) การทดสอบ(Testing) และ เอกสารการใช้งาน(documentation)

ดังนั้นถ้าคุณยังไม่รู้ pattern ซ้ำ หรือ Reuse อย่างไร สนใจแค่โค้ดที่ทำงานได้ก่อน แล้วค่อยดูว่า reuse ได้เมื่อไหร่

---

จงค้นหาสมดุลระหว่าง ไม่ reuse เลย กับ reuse เร็วเกินไป ให้เจอในโปรของคุณ
ไม่ reuse เลย = ระบบพังเพราะซ้ำซ้อน
 reuse เร็วเกินไป = ระบบพังเพราะซับซ้อน
 reuse เมื่อเห็น pattern จริง = ระบบที่ดี
